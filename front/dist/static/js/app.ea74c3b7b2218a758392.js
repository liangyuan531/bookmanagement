webpackJsonp([1],{"5uGN":function(t,e){},"90tB":function(t,e){},GmzD:function(t,e){},Jb5u:function(t,e){},LoPa:function(t,e){},NHnr:function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=o("7+uW"),n={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"app"}},[e("router-view")],1)},staticRenderFns:[]};var i=o("VU/8")({name:"App"},n,!1,function(t){o("s347")},null,null).exports,r=o("/ocq"),s={name:"Login",data:function(){return{loginForm:{username:"",password:""},responseResult:[]}},methods:{login:function(){var t=this,e=this;this.$axios.post("/login",{username:this.loginForm.username,password:this.loginForm.password}).then(function(o){if(200===o.data.code){e.$store.commit("login",e.loginForm);var a=t.$route.query.redirect;t.$router.replace({path:"/"===a||void 0===a?"/index":a})}}).catch(function(t){console.log(t)})}}},l={render:function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("body",{attrs:{id:"back-ground"}},[o("el-form",{staticClass:"login-container",attrs:{"label-position":"left","label-width":"0px"}},[o("h3",{staticClass:"login_title"},[t._v("User Login")]),t._v(" "),o("el-form-item",[o("el-input",{attrs:{type:"text",placeholder:"username","auto-complete":"off"},model:{value:t.loginForm.username,callback:function(e){t.$set(t.loginForm,"username",e)},expression:"loginForm.username"}})],1),t._v(" "),o("el-form-item",[o("el-input",{attrs:{type:"password",placeholder:"password","auto-complete":"off"},model:{value:t.loginForm.password,callback:function(e){t.$set(t.loginForm,"password",e)},expression:"loginForm.password"}})],1),t._v(" "),o("el-form-item",{staticStyle:{width:"100%"}},[o("el-button",{staticClass:"login_btn",attrs:{type:"primary"},on:{click:t.login}},[t._v("Login")])],1)],1)],1)},staticRenderFns:[]};var c=o("VU/8")(s,l,!1,function(t){o("mefm")},"data-v-7537d7cb",null).exports,u={render:function(){var t=this.$createElement;return(this._self._c||t)("div",[this._v("\n    hello world\n")])},staticRenderFns:[]};var d=o("VU/8")({name:"AppIndex"},u,!1,function(t){o("GmzD")},"data-v-7977fdba",null).exports,m={render:function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("el-menu",{staticClass:"top-nav-menu",staticStyle:{"min-width":"1300px"},attrs:{"default-active":"/index",router:"",mode:"horizontal","background-color":"white","text-color":"#222","active-text-color":"red"}},[t._l(t.navList,function(e,a){return o("el-menu-item",{key:a,attrs:{index:e.name}},[t._v("\n    "+t._s(e.navItem)+"\n  ")])}),t._v(" "),o("a",{staticStyle:{color:"#222",float:"right",padding:"20px"},attrs:{href:"#nowhere"}},[t._v("more")]),t._v(" "),o("i",{staticClass:"el-icon-menu",staticStyle:{float:"right","font-size":"45px",color:"#222","padding-top":"8px"}}),t._v(" "),o("span",{staticStyle:{position:"absolute","padding-top":"20px",right:"43%","font-size":"20px","font-weight":"bold"}})],2)},staticRenderFns:[]};var f={name:"Home",components:{NavMenu:o("VU/8")({name:"NavMenu",data:function(){return{navList:[{name:"/index",navItem:"Home"},{name:"/note",navItem:"Notebook"},{name:"/library",navItem:"Library"},{name:"/admin",navItem:"Personal"}]}}},m,!1,function(t){o("90tB")},"data-v-9ba0961c",null).exports}},p={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("nav-menu"),this._v(" "),e("router-view")],1)},staticRenderFns:[]};var v=o("VU/8")(f,p,!1,function(t){o("Jb5u")},"data-v-78f9cf49",null).exports,h={render:function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("el-menu",{staticClass:"categories",attrs:{"default-active":"0","active-text-color":"red"},on:{select:t.handleSelect}},[o("el-menu-item",{attrs:{index:"0"}},[o("i",{staticClass:"el-icon-menu"}),t._v(" "),o("span",{attrs:{slot:"title"},slot:"title"},[t._v("All")])]),t._v(" "),o("el-menu-item",{attrs:{index:"1"}},[o("i",{staticClass:"el-icon-menu"}),t._v(" "),o("span",{attrs:{slot:"title"},slot:"title"},[t._v("Fiction")])]),t._v(" "),o("el-menu-item",{attrs:{index:"2"}},[o("i",{staticClass:"el-icon-menu"}),t._v(" "),o("span",{attrs:{slot:"title"},slot:"title"},[t._v("Non-Fiction")])]),t._v(" "),o("el-menu-item",{attrs:{index:"3"}},[o("i",{staticClass:"el-icon-menu"}),t._v(" "),o("span",{attrs:{slot:"title"},slot:"title"},[t._v("Culture")])]),t._v(" "),o("el-menu-item",{attrs:{index:"4"}},[o("i",{staticClass:"el-icon-menu"}),t._v(" "),o("span",{attrs:{slot:"title"},slot:"title"},[t._v("Life")])]),t._v(" "),o("el-menu-item",{attrs:{index:"5"}},[o("i",{staticClass:"el-icon-menu"}),t._v(" "),o("span",{attrs:{slot:"title"},slot:"title"},[t._v("Management")])]),t._v(" "),o("el-menu-item",{attrs:{index:"6"}},[o("i",{staticClass:"el-icon-menu"}),t._v(" "),o("span",{attrs:{slot:"title"},slot:"title"},[t._v("Technology")])])],1)},staticRenderFns:[]};var b=o("VU/8")({name:"SideMenu",data:function(){return{cid:""}},methods:{handleSelect:function(t,e){this.cid=t,this.$emit("indexSelect")}}},h,!1,function(t){o("5uGN")},"data-v-03cfbcce",null).exports,g={render:function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",[o("i",{staticClass:"el-icon-circle-plus-outline",on:{click:function(e){t.dialogFormVisible=!0}}}),t._v(" "),o("el-dialog",{attrs:{title:"Add/Update Book",visible:t.dialogFormVisible},on:{"update:visible":function(e){t.dialogFormVisible=e},close:t.clear}},[o("el-form",{ref:"dataFor",staticStyle:{"text-align":"left"},model:{value:t.form,callback:function(e){t.form=e},expression:"form"}},[o("el-form-item",{attrs:{label:"Title","label-width":t.formLabelWidth,prop:"title"}},[o("el-input",{attrs:{"aria-autocomplete":"off"},model:{value:t.form.title,callback:function(e){t.$set(t.form,"title",e)},expression:"form.title"}})],1),t._v(" "),o("el-form-item",{attrs:{label:"Author","label-width":t.formLabelWidth,prop:"author"}},[o("el-input",{attrs:{"aria-autocomplete":"off"},model:{value:t.form.author,callback:function(e){t.$set(t.form,"author",e)},expression:"form.author"}})],1),t._v(" "),o("el-form-item",{attrs:{label:"Date","label-width":t.formLabelWidth,prop:"date"}},[o("el-input",{attrs:{"aria-autocomplete":"off"},model:{value:t.form.date,callback:function(e){t.$set(t.form,"date",e)},expression:"form.date"}})],1),t._v(" "),o("el-form-item",{attrs:{label:"Press","label-width":t.formLabelWidth,prop:"press"}},[o("el-input",{attrs:{"aria-autocomplete":"off"},model:{value:t.form.press,callback:function(e){t.$set(t.form,"press",e)},expression:"form.press"}})],1),t._v(" "),o("el-form-item",{attrs:{label:"Cover","label-width":t.formLabelWidth,prop:"cover"}},[o("el-input",{attrs:{"aria-autocomplete":"off"},model:{value:t.form.cover,callback:function(e){t.$set(t.form,"cover",e)},expression:"form.cover"}})],1),t._v(" "),o("el-form-item",{attrs:{label:"Description","label-width":t.formLabelWidth,prop:"abs"}},[o("el-input",{attrs:{"aria-autocomplete":"off"},model:{value:t.form.abs,callback:function(e){t.$set(t.form,"abs",e)},expression:"form.abs"}})],1),t._v(" "),o("el-form-item",{attrs:{label:"Category","label-width":t.formLabelWidth,prop:"category"}},[o("el-select",{attrs:{placeholder:"Choose category"},model:{value:t.form.category.id,callback:function(e){t.$set(t.form.category,"id",e)},expression:"form.category.id"}},[o("el-option",{attrs:{label:"Fiction",value:"1"}}),t._v(" "),o("el-option",{attrs:{label:"Non-Fiction",value:"2"}}),t._v(" "),o("el-option",{attrs:{label:"Culture",value:"3"}}),t._v(" "),o("el-option",{attrs:{label:"Life",value:"4"}}),t._v(" "),o("el-option",{attrs:{label:"Management",value:"5"}}),t._v(" "),o("el-option",{attrs:{label:"Technology",value:"6"}})],1)],1),t._v(" "),o("el-form-item",{staticStyle:{height:"0"},attrs:{prop:"id"}},[o("el-input",{attrs:{type:"hidden",autocomplete:"off"},model:{value:t.form.id,callback:function(e){t.$set(t.form,"id",e)},expression:"form.id"}})],1)],1),t._v(" "),o("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("el-button",{on:{click:function(e){t.dialogFormVisible=!1}}},[t._v("Cancel")]),t._v(" "),o("el-button",{attrs:{type:"primary"},on:{click:t.onSubmit}},[t._v("Submit")])],1)],1)],1)},staticRenderFns:[]};var _={render:function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"search-bar"},[o("el-input",{attrs:{placeholder:"Search by author/book","prefix-icon":"el-icon-search"},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.searchClick(e)}},model:{value:t.keywords,callback:function(e){t.keywords=e},expression:"keywords"}}),t._v(" "),o("el-button",{attrs:{size:"small",type:"primary",icon:"el-icon-search"},on:{click:t.searchClick}},[t._v("Search")])],1)},staticRenderFns:[]};var x={name:"Books",components:{EditForm:o("VU/8")({name:"EditForm",data:function(){return{dialogFormVisible:!1,form:{id:"",title:"",author:"",date:"",press:"",cover:"",abs:"",category:{id:"",name:""}},formLabelWidth:"120px"}},methods:{clear:function(){this.form={id:"",title:"",author:"",date:"",press:"",cover:"",abs:"",category:""}},onSubmit:function(){var t=this;this.$axios.post("/books",{id:this.form.id,cover:this.form.cover,title:this.form.title,author:this.form.author,date:this.form.date,press:this.form.press,abs:this.form.abs,category:this.form.category}).then(function(e){e&200===e.status&&(t.dialogFormVisible=!1,t.$emit("onSubmit"))})}}},g,!1,function(t){o("LoPa")},"data-v-e9cabb6e",null).exports,SearchBar:o("VU/8")({name:"SearchBar",data:function(){return{keywords:"",books:[],cardLoading:[]}},methods:{searchClick:function(){this.$emit("onSearch")}}},_,!1,function(t){o("OW6N")},"data-v-33ec3fbb",null).exports},data:function(){return{books:[],currentPage:1,pagesize:16}},mounted:function(){this.loadBooks()},methods:{loadBooks:function(){var t=this;this.$axios.get("/books").then(function(e){e&&200===e.status&&(t.books=e.data)})},handleCurrentChange:function(t){this.currentPage=t,console.log(this.currentPage)},searchResult:function(){var t=this;this.$axios.post("/search",{keywords:this.$refs.searchBar.keywords}).then(function(e){e&&200===e.status&&(t.books=e.data)})},deleteBook:function(t){var e=this;this.$confirm("Delete the book permanently! Are you sure?","Warning",{confirmButtonText:"Confirm",cancelButtonText:"Cancel",type:"warning"}).then(function(){e.$axios.post("/delete",{id:t}).then(function(t){t&&200===t.status&&e.loadBooks()})}).catch(function(){e.$message({type:"info",message:"Cancelled"})})},editBook:function(t){this.$refs.edit.dialogFormVisible=!0,this.$refs.edit.form={id:t.id,cover:t.cover,title:t.title,author:t.author,date:t.date,press:t.press,abs:t.abs,category:{id:t.category.id.toString(),name:t.category.name}}}}},y={render:function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",[o("el-row",{staticStyle:{height:"840px"}},[o("search-bar",{ref:"searchBar",on:{onSearch:t.searchResult}}),t._v(" "),t._l(t.books.slice((t.currentPage-1)*t.pagesize,t.currentPage*t.pagesize),function(e){return o("el-tooltip",{key:e.id,attrs:{effect:"dark",placement:"right"}},[o("p",{staticStyle:{"font-size":"14px","margin-bottom":"6px"},attrs:{slot:"content"},slot:"content"},[t._v(t._s(e.title))]),t._v(" "),o("p",{staticStyle:{"font-size":"13px","margin-bottom":"6px"},attrs:{slot:"content"},slot:"content"},[o("span",[t._v(t._s(e.author))]),t._v(" /\n        "),o("span",[t._v(t._s(e.date))]),t._v(" /\n        "),o("span",[t._v(t._s(e.press))])]),t._v(" "),o("p",{staticClass:"abstract",staticStyle:{width:"300px"},attrs:{slot:"content"},slot:"content"},[t._v(t._s(e.abs))]),t._v(" "),o("el-card",{staticClass:"book",staticStyle:{width:"135px","margin-bottom":"20px",height:"233px",float:"left","margin-right":"15px"},attrs:{bodyStyle:"padding:10px",shadow:"hover"}},[o("div",{staticClass:"cover",on:{click:function(o){return t.editBook(e)}}},[o("img",{attrs:{src:e.cover,alt:"Cover"}})]),t._v(" "),o("div",{staticClass:"info"},[o("div",{staticClass:"title"},[o("a",{attrs:{href:""}},[t._v(t._s(e.title))])]),t._v(" "),o("i",{staticClass:"el-icon-delete",on:{click:function(o){return t.deleteBook(e.id)}}})]),t._v(" "),o("div",{staticClass:"author"},[t._v(t._s(e.author))])])],1)}),t._v(" "),o("edit-form",{ref:"edit",on:{onSubmit:function(e){return t.loadBooks()}}})],2),t._v(" "),o("el-row",[o("el-pagination",{attrs:{"current-page":t.currentPage,"page-size":t.pagesize,total:t.books.length},on:{"current-change":t.handleCurrentChange}})],1)],1)},staticRenderFns:[]};var k={name:"AppLibrary",components:{SideMenu:b,Books:o("VU/8")(x,y,!1,function(t){o("liML")},"data-v-d4b0b6a0",null).exports},methods:{listByCategory:function(){var t=this,e="category/"+this.$refs.sideMenu.cid+"/books";t.$axios.get(e).then(function(e){e&&200===e.status&&(t.$refs.booksArea.books=e.data)})}}},w={render:function(){var t=this.$createElement,e=this._self._c||t;return e("el-container",[e("el-aside",{staticClass:"side-bar"},[e("switch"),this._v(" "),e("SideMenu",{ref:"sideMenu",on:{indexSelect:this.listByCategory}})],1),this._v(" "),e("el-main",[e("books",{ref:"booksArea",staticClass:"books-display"})],1)],1)},staticRenderFns:[]};var C=o("VU/8")(k,w,!1,function(t){o("fLEd")},"data-v-66c9275b",null).exports;a.default.use(r.a);var $=new r.a({mode:"history",routes:[{path:"/login",name:"login",component:c},{path:"/",component:v,redirect:"/index",children:[{path:"/index",name:"AppIndex",component:d,meta:{requireAuth:!0}},{path:"/library",name:"Library",component:C,meta:{requireAuth:!0}}]}]}),S=o("zL8q"),F=o.n(S),L=(o("tvR6"),o("mvHQ")),B=o.n(L),V=o("NYxO");a.default.use(V.a);var E=new V.a.Store({state:{user:{username:null==window.localStorage.getItem("user")?"":JSON.parse(window.localStorage.getItem("user")).username}},mutations:{login:function(t,e){t.user=e,window.localStorage.setItem("user",B()(e))}}}),R=o("mtWM");R.defaults.baseURL="http://localhost:9090/api",a.default.prototype.$axios=R,a.default.config.productionTip=!1,a.default.use(F.a),$.beforeEach(function(t,e,o){t.meta.requireAuth?E.state.user.username?o():o({path:"login",query:{redirect:t.fullPath}}):o()}),new a.default({el:"#app",render:function(t){return t(i)},router:$,store:E,components:{App:i},template:"<App/>"})},OW6N:function(t,e){},fLEd:function(t,e){},liML:function(t,e){},mefm:function(t,e){},s347:function(t,e){},tvR6:function(t,e){}},["NHnr"]);
//# sourceMappingURL=app.ea74c3b7b2218a758392.js.map